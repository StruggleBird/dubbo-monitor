<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:ldap="http://www.springframework.org/schema/ldap"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/ldap http://www.springframework.org/schema/ldap/spring-ldap.xsd">

	<bean id="contextSource" class="org.springframework.ldap.core.support.LdapContextSource">
		<property name="pooled" value="true" />
		<property name="urls">
			<list>
				<value>ldap://192.168.5.9:389</value>
			</list>
		</property>
		<property name="base" value="dc=jingoal,dc=com" />
		<property name="baseEnvironmentProperties">
			<map>
				<entry>
					<key>
						<value>com.sun.jndi.ldap.connect.timeout</value>
					</key>
					<value>3000</value>
				</entry>
				<entry>
					<key>
						<value>com.sun.jndi.ldap.read.timeout</value>
					</key>
					<value>3000</value>
				</entry>
				<entry>
					<key>
						<value>java.naming.security.protocol</value>
					</key>
					<value>none</value>
				</entry>
				<entry>
					<key>
						<value>java.naming.security.authentication</value>
					</key>
					<value>simple</value>
				</entry>
			</map>
		</property>
	</bean>

	<ldap:ldap-template id="ldapTemplate" />
	
	<!-- equal @EnableLdapRepositories annotation on a configuration class 
	<ldap:repositories base-package="com.handu.open.dubbo.monitor.ldap"/>-->


	<bean id="authenticateService" class="com.handu.open.dubbo.monitor.ldap.AuthenticateService">
		<property name="ldapTemplate" ref="ldapTemplate" />
		<property name="ou" value="People" />
		<property name="objectclass" value="inetOrgPerson"/>
	</bean>
	
	<bean class="org.springframework.ldap.core.support.BaseLdapPathBeanPostProcessor" />
	
</beans>